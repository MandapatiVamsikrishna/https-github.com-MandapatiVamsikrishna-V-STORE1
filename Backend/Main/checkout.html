<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checkout â€” V-STORE</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="cart" href="cart.html" />
  <script src="script.js" defer></script>

  <link rel="icon" href="/favicon.ico" />
</head>
<body>
  <!-- Top Navigation (same pattern as your other pages) -->
  <nav class="nav" role="navigation" aria-label="Main">
    <div class="nav-inner">
      <a class="logo" href="index.html">V-STORE</a>
      <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="Toggle menu">â˜°</button>
      <ul id="nav-menu" class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="categories.html">Categories</a></li>
        <li><a aria-current="page" href="checkout.html">Checkout</a></li>
        <li><a href="cart.html">Cart (<span id="cart-count" class="badge">0</span>)</a></li>
        <li><button id="theme-toggle" class="icon-btn" aria-label="Toggle dark mode" title="Toggle theme">ðŸŒ“</button></li>
      </ul>
    </div>
  </nav>

  <!-- Page Hero -->
  <header class="page-hero">
    <div class="hero-inner">
      <h1>Checkout</h1>
      <p class="muted">Secure payment & fast delivery. Enter your details below.</p>
    </div>
  </header>

  <!-- Layout: left = Order Summary (sticky), right = Checkout Form -->
  <main class="container" style="align-items:start;">
    <!-- Order Summary (script.js renders items & totals here) -->
    <aside class="filters" aria-label="Order summary">
      <h2 class="filters-title">Order Summary</h2>

      <ul id="cart-items" style="list-style:none; padding:0; margin:0;"></ul>

      <hr style="border:none;border-top:1px solid color-mix(in oklab, var(--text) 10%, transparent); margin:.8rem 0;">

      <!-- Promo code -->
      <form id="promo-form" class="newsletter" style="margin:.4rem 0 .6rem;">
        <input id="promo-code" type="text" placeholder="Promo code (e.g. WELCOME10)" autocomplete="off" />
        <button type="submit">Apply</button>
      </form>
      <p id="promo-hint" class="form-hint">
        Codes: <strong>WELCOME10</strong> (10% off), <strong>FREESHIP</strong> (free shipping), <strong>SAVE5</strong> (Â£5 off)
      </p>

      <!-- Totals -->
      <div class="summary-lines" style="display:grid; gap:.35rem; margin-top:.4rem;">
        <div class="meta" style="display:flex; justify-content:space-between;">
          <span>Subtotal</span><strong id="summary-subtotal">Â£0.00</strong>
        </div>
        <div class="meta" style="display:flex; justify-content:space-between;">
          <span>Discount</span><strong id="summary-discount">â€“ Â£0.00</strong>
        </div>
        <div class="meta" style="display:flex; justify-content:space-between;">
          <span>Shipping</span><strong id="summary-shipping">Â£0.00</strong>
        </div>
        <p id="shipping-note" class="form-hint" style="margin:.1rem 0 0;"></p>
        <div class="meta" style="display:flex; justify-content:space-between; border-top:1px solid color-mix(in oklab, var(--text) 10%, transparent); padding-top:.5rem; margin-top:.4rem;">
          <strong>Total</strong><strong id="summary-total">Â£0.00</strong>
        </div>
      </div>
    </aside>

    <!-- Checkout Form -->
    <section class="results" aria-live="polite" style="width:100%;">
      <div class="toolbar" style="margin-bottom:.8rem;">
        <span id="item-count">0 items</span>
      </div>

      <form id="checkout-form" class="card" style="padding:1rem;">
        <h2 style="margin:.2rem 0 .6rem;">Shipping Details</h2>

        <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr)); gap:.75rem;">
          <div>
            <label for="name">Full Name</label>
            <input id="name" name="name" type="text" required
                   style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
          </div>
          <div>
            <label for="phone">Phone</label>
            <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="+44 7700 900123" required
                   style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
          </div>
          <div style="grid-column:1 / -1;">
            <label for="address">Address</label>
            <input id="address" name="address" type="text" required placeholder="House, street, area"
                   style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
          </div>
          <div>
            <label for="city">City</label>
            <input id="city" name="city" type="text" required
                   style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
          </div>
          <div>
            <!-- rename id to 'zip' so script.js captures it -->
            <label for="zip">Postcode</label>
            <input id="zip" name="zip" type="text" required placeholder="SW1A 1AA"
                   style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
          </div>
        </div>

        <h2 style="margin:1rem 0 .6rem;">Payment</h2>

        <div class="payment-options" style="display:grid; gap:.6rem;">
          <!-- Credit Card -->
          <label class="payment-option chip" style="cursor:pointer;">
            <input type="radio" name="payment-method" value="credit-card" required />
            <span style="margin-left:.4rem;">Credit / Debit Card</span>
          </label>
          <div id="credit-card-details" class="payment-details" style="display:none;">
            <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr)); gap:.75rem;">
              <div style="grid-column:1 / -1;">
                <label for="card-number">
                  Card Number
                  <!-- brand badge used by script.js -->
                  <span id="card-brand" class="chip" style="display:none; margin-left:.5rem;"></span>
                </label>
                <input id="card-number" name="card-number" inputmode="numeric" autocomplete="cc-number" placeholder="1234 5678 9012 3456"
                       style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
              </div>
              <div>
                <label for="card-name">Name on Card</label>
                <input id="card-name" name="card-name" autocomplete="cc-name"
                       style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
              </div>
              <div>
                <label for="expiry-date">Expiry (MM/YY)</label>
                <input id="expiry-date" name="expiry-date" inputmode="numeric" placeholder="MM/YY" autocomplete="cc-exp"
                       style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
              </div>
              <div>
                <label for="cvv">CVV</label>
                <input id="cvv" name="cvv" inputmode="numeric" placeholder="123" autocomplete="cc-csc"
                       style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
              </div>
            </div>
          </div>

          <!-- PayPal -->
          <label class="payment-option chip" style="cursor:pointer;">
            <input type="radio" name="payment-method" value="paypal" />
            <span style="margin-left:.4rem;">PayPal</span>
          </label>
          <div id="paypal-details" class="payment-details" style="display:none;">
            <p class="form-hint">Youâ€™ll be redirected to PayPal to complete your payment.</p>
          </div>

          <!-- UPI -->
          <label class="payment-option chip" style="cursor:pointer;">
            <input type="radio" name="payment-method" value="upi" />
            <span style="margin-left:.4rem;">UPI</span>
          </label>
          <div id="upi-details" class="payment-details" style="display:none;">
            <label for="upi-id">UPI ID</label>
            <input id="upi-id" name="upi-id" type="text" placeholder="yourname@upi"
                   style="width:100%;padding:.7rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab,var(--text) 10%,transparent);background:var(--bg-elev);color:var(--text);" />
            <div id="upi-platform-display" class="meta" style="display:none; align-items:center; gap:.5rem; margin-top:.35rem;">
              <span id="upi-platform-icon" aria-hidden="true">ðŸ’³</span>
              <span id="upi-platform-name" class="muted"></span>
            </div>
          </div>
        </div>

        <button type="submit" class="btn-primary" style="margin-top:1rem;">Submit Payment</button>
      </form>
    </section>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite" hidden></div>

  <footer class="footer">
    <div class="footer-inner">
      <p>Â© <span id="year"></span> V-STORE</p>
    </div>
  </footer>

  <!-- âœ… load your unified logic -->
  <script src="script.js" defer></script>
</body>
</html>
